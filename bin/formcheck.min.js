define("formCheck",function(m){m=m("minified");var e=m.$,c=m._,q="placeholder"in document.createElement("INPUT"),l=function(m,r){this.defaultOptions={options:{display:{showErrors:!0,showErrorMethod:"popup",errorPopupClass:"fc-tbx",popupXoffset:-40,popupYoffset:-48,popupPosition:"right",errorInlineClass:"fc-error",validateOnInit:!1,orderByTabIndex:!0,submitFormIfValid:!0,placeholderSupport:!0,scrollToInvalid:!0,setFocusToInvalid:!0},alerts:{required:"This field is required.",alpha:"This field accepts alphabetic characters only.",
alphanum:"This field accepts alphanumeric characters only.",nodigit:"No digits are accepted.",digit:"Please enter a valid integer.",digitltd:"The value must be between %0 and %1",number:"Please enter a valid number.",email:"Please enter a valid email.",image:"This field should only contain image types",phone:"Please enter a valid phone number.",url:"Please enter a valid url.",matches:"This field is different from %0",differs:"This value must be different from %0",length_str:"The length is incorrect, it must be between %0 and %1",
length_fix:"The length is incorrect, it must be exactly %0 characters",length_max:"The length is incorrect, it must be at max %0",length_min:"The length is incorrect, it must be at least %0",checkbox:"Please check the box",radios:"Please select one of the options.",select:"Please choose a value",select_multiple:"Please choose at least one value",date:"Please enter a valid date",defaultMessage:"You must provide a value for this field."},regexp:{required:/[^.*]/,alpha:/^[a-z ._-]+$/i,alphanum:/^[a-z0-9 ._-]+$/i,
digit:/^[-+]?[0-9]+$/,nodigit:/^[^0-9]+$/,number:/^[-+]?\d*\.?\d+$/,email:/^([a-zA-Z0-9_\.\-\+%])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,50})+$/,image:/.(jpg|jpeg|png|gif|bmp)$/i,phone:/^\+{0,1}[0-9 \(\)\.\-]+$/,phone2:/^[\d\s ().-]+$/,phone3:/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/,phone_inter:/^\+{0,1}[0-9 \(\)\.\-]+$/,url:/^(http|https|ftp)\:\/\/[a-z0-9\-\.]+\.[a-z]{2,3}(:[a-z0-9]*)?\/?([a-z0-9\-\._\?\,\'\/\\\+&amp;%\$#\=~])*$/i,
date:/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{2,4}$/}}};var b=this;l.prototype._initialize=function(a,h){this.options=c.copyObj(this.defaultOptions.options);this.selector=a;c.isEmpty(h)||(c.copyObj(h.display,this.options.display),c.copyObj(h.alerts,this.options.alerts),c.copyObj(h.regexp,this.options.regexp));this.itemsToValidate=e("input,select,textarea",a);c.isEmpty(this.itemsToValidate)&&console.log("No inputs on form: "+a);this.itemsToValidate.each(function(a,c){var d=e(a);d.get("required")&&(d.set("required",
!1),d.set("%required",!0));if("submit"==a.type)d.onClick(function(a){b.options.display.placeholderSupport&&!q&&b.itemsToValidate.each(function(a,b){var d=e(a);if(("INPUT"==d.get("tagName")||"TEXTAREA"==d.get("tagName"))&&"submit"!=d.get("@type")){var c=d.get("value"),f=d.get("@placeholder");""==c&&d.set("value",f)}});return b._doValidation(a)&&b.options.display.submitFormIfValid})});this.options.display.orderByTabIndex&&(this.itemsToValidate=this.itemsToValidate.sort(function(a,b){var d=e(a).get("@tabindex"),
d=c.isEmpty(d)?0:parseInt(d),n=e(b).get("@tabindex"),n=c.isEmpty(n)?0:parseInt(n);return d<n?-1:n>d?1:0}));e(a).on("invalid",function(a){a.preventDefault();return!1});e(a).on("?submit",function(a){b.options.display.placeholderSupport&&!q&&b.itemsToValidate.each(function(a,d){var b=e(a);if(("INPUT"==b.get("tagName")||"TEXTAREA"==b.get("tagName"))&&"submit"!=b.get("@type")){var c=b.get("value"),f=b.get("@placeholder");""==c&&b.set("value",f)}});return b._doValidation(a)&&b.options.display.submitFormIfValid});
if(b.options.display.placeholderSupport&&!q)e(a).on("formisinvalid",function(){b.itemsToValidate.each(function(a,b){var d=e(a);if(("INPUT"==d.get("tagName")||"TEXTAREA"==d.get("tagName"))&&"submit"!=d.get("@type")){var c=d.get("value"),h=d.get("@placeholder");""==c&&d.set("value",h)}})});b.options.display.placeholderSupport&&!q&&b.itemsToValidate.each(function(a,b){var d=e(a);if(("INPUT"==d.get("tagName")||"TEXTAREA"==d.get("tagName"))&&"submit"!=d.get("@type")){var h=d.get("@placeholder");c.isEmpty(h)||
(""==d.get("value")&&d.set("value",h),d.on("focus",function(){d.get("value")==h&&d.set("value","")}),d.on("blur",function(){""==c.trim(d.get("value"))&&d.set("value",h)}))}});e(a).set("noValidate",!0);b.options.display.validateOnInit&&b._doValidation({preventDefault:function(){}})};l.prototype._focusPlaceholders=function(a){if(!c.isEmpty(a.target)){a=e(a.target);var b=a.get("@placeholder");a.get("value")==b&&a.set("value","")}};l.prototype._blurPlaceholders=function(a){if(!c.isEmpty(a.target)){a=
e(a.target);var b=a.get("@placeholder");""==c.trim(a.get("value"))&&a.set("value",b)}};l.prototype.checkIfFormIsValid=function(){return b._doValidation({returnValue:!1})};l.prototype._doValidation=function(a){"popup"==b.options.display.showErrorMethod?("repositionPopup"in b&&e.off(b.repositionPopup),e("."+b.options.display.errorPopupClass).remove()):"inline"==b.options.display.showErrorMethod&&e("."+b.options.display.errorInlineClass).remove();var h=!1;b.itemsToValidate.each(function(f,g){h||b._validateEl(e(f))||
(h=!0,b._showErrors(e(f)),a.preventDefault?a.preventDefault():a.returnValue=!1,e(b.selector).trigger("formisinvalid",c(e(f),e(b.selector))))},this);if(h)return!1;e(b.selector).trigger("formisvalid",e(b.selector));return!0};l.prototype._showErrors=function(a){a.get("errors")&&c(a.get("errors")).each(function(h,f){if(b.options.display.showErrors)if("string"==typeof b.options.display.showErrorMethod)switch(b.options.display.showErrorMethod.toLowerCase()){case "inline":var g=EE("div",{"@class":b.options.display.errorInlineClass},
[EE("p",h)]);a.addAfter(g);break;default:var g=EE("div",{"@class":b.options.display.errorPopupClass},[EE("table",{"@cellPadding":"0",$borderSpacing:0,$borderCollapse:"collapse",border:0},[EE("tr",{},[EE("td",{"@class":"tl"}),EE("td",{"@class":"t"}),EE("td",{"@class":"tr"})]),EE("tr",{},[EE("td",{"@class":"l"}),EE("td",{"@class":"c"},[EE("div",{"@class":"err"},[EE("p",h)]),EE("a",{"@class":"close"}).on("click",function(a){e(".fc-tbx").remove();e.off(b.repositionPopup)})]),EE("td",{"@class":"r"})]),
EE("tr",{},[EE("td",{"@class":"bl"}),EE("td",{"@class":"b"}),EE("td",{"@class":"br"})])])]),d=a[0].getBoundingClientRect();window.scrollTo(0,d.top-70);b.repositionPopup=function(){d=a[0].getBoundingClientRect();var c=document.documentElement,e=(window.pageYOffset||c.scrollTop)-(c.clientTop||0);g[0].style.left=(window.pageXOffset||c.scrollLeft)-(c.clientLeft||0)+parseFloat("left"==b.options.display.popupPosition?d.left:d.right)+b.options.display.popupXoffset+"px";g[0].style.top=parseFloat(d.top)+b.options.display.popupYoffset+
e+"px"};b.repositionPopup();e(window).on("resize",b.repositionPopup);e("body").addFront(g)}else c.isFunction(b.options.display.showErrorMethod)?b.options.display.showErrorMethod(h,a):alert(h)});b.options.display.setFocusToInvalid&&a[0].focus()};l.prototype._validateEl=function(a){var b=this;e.off(function(a){return b._doValidation(a)});if(b.options.display.placeholderSupport&&!q){var f=a.get("@placeholder");a.get("value")==f&&a.set("value","")}a.set("errors",[]);if("SELECT"==a.get("tagName").toUpperCase()){if(a.get("%required")&&
0==c.trim(a.get("value")).length)return a.get("errors").push(a.get("multiple")?this.options.alerts.select_multiple:this.options.alerts.select),!1}else{f="INPUT"==a.get("tagName").toUpperCase()?a.get("@type"):a.get("type");if("text"==f.toLowerCase()){var g=a.get("%validate");c.isEmpty(g,!0)||(f=g)}var f=f.toLowerCase(),d=a.get("%required"),n=a.get("@pattern");c.isEmpty(n)&&f in this.options.regexp&&(n=this.options.regexp[f]);g=a.get("%invalid-message");c.isEmpty(g)&&f in this.options.alerts&&(g=this.options.alerts[f]);
var l=c.isEmpty(a.get("@minlength"))?0:parseInt(a.get("@minlength"),10),p=c.isEmpty(a.get("@maxlength"))?-1:parseInt(a.get("@maxlength"),10),m=a.get("value");if(d&&0==m.length)return a.get("errors").push(c.isEmpty(g)?this.options.alerts.defaultMessage:g),!1;if(m.length<l||m.length>p&&-1<p){if(-1<p){var k;k=p==l?this.options.alerts.length_fix.replace("%0",p):this.options.alerts.length_str.replace("%0",l).replace("%1",p)}else k=l>p?this.options.alerts.length_min.replace("%0",l):this.options.alerts.length_max.replace("%0",
p);a.get("errors").push(k);return!1}switch(f){case "checkbox":if(d&&!a.get("checked"))return a.get("errors").push(c.isEmpty(g)?this.options.alerts.defaultMessage:g),!1;break;case "tel":case "phone":var r=!1;c(this.options.regexp.phone,this.options.regexp.phone2,this.options.regexp.phone3,this.options.regexp.phone_inter).each(function(a,b){r||(new RegExp(a)).test(m)&&(r=!0)});if(!r)return a.get("errors").push(c.isEmpty(g)?this.options.alerts.defaultMessage:g),!1;break;case "radio":k=e(this.selector).values();
if(a.get("@name")in k)c.isEmpty(k[a.get("@name")])&&a.get("errors").push(c.isEmpty(g)?this.options.alerts.radios:g);else return a.get("errors").push(c.isEmpty(g)?this.options.alerts.radios:g),!1;break;default:if("[object RegExp]"==Object.prototype.toString.call(n)||!c.isEmpty(n)){if(!(new RegExp(n)).test(m))return a.get("errors").push(c.isEmpty(g)?this.options.alerts.defaultMessage:g),!1}else if(!c.isEmpty(a.get("%validate")))if(c.startsWith(a.get("%validate"),"%"))try{if(k=eval(a.get("%validate").substr(1)),
!c.isEmpty(k))return k(a)}catch(t){console.log('The custom function specified for the element: "'+a.get("@id")+'" is not defined.')}else if(c.startsWith(f,"matches")){if(k="#"+f.substr(8),f=e(k).get("value"),m!=f)return k=b.options.alerts.matches.replace("%0",e(k).get("@placeholder")),a.get("errors").push(k),!1}else if(c.startsWith(f,"differs")&&(k="#"+f.substr(8),f=e(k).get("value"),m==f))return k=b.options.alerts.differs.replace("%0",e(k).get("@placeholder")),a.get("errors").push(k),!1}}return!0};
l.prototype.add=function(a){this.itemsToValidate.contains(a)||(this.itemsToValidate=c(this.itemsToValidate,a))};l.prototype.remove=function(a){this.itemsToValidate.contains(a)&&(this.itemsToValidate=this.itemsToValidate.filter(a))};this._initialize(m,r)};m.$.validate=function(c,e){return new l(c,e)}});
